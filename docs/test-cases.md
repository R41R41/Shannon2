# Shannon テストケース

Minecraft でのシャノンの動作を検証するための包括的なテストケース集です。

---

## 🎯 テスト環境の準備

### 必要なもの

- クリエイティブモードのワールド（または必要なアイテムを事前に用意）
- 平坦な場所（建築テスト用）
- 木、石、鉱石がある場所（採掘テスト用）
- 村（村人テスト用）
- モブがスポーンする環境（戦闘テスト用）

### テスト前の確認

1. Shannon がサーバーに接続していること
2. ShannonUIMod が動作していること（スクリーンショット機能用）
3. バックエンドが起動していること

---

## 📋 テストカテゴリ

### カテゴリ一覧

1. [基本動作](#1-基本動作)
2. [移動・ナビゲーション](#2-移動ナビゲーション)
3. [採掘・ブロック操作](#3-採掘ブロック操作)
4. [クラフト・製作](#4-クラフト製作)
5. [インベントリ管理](#5-インベントリ管理)
6. [チェスト・コンテナ](#6-チェストコンテナ)
7. [かまど・精錬](#7-かまど精錬)
8. [農業](#8-農業)
9. [戦闘](#9-戦闘)
10. [探索・調査](#10-探索調査)
11. [村人取引](#11-村人取引)
12. [複合タスク](#12-複合タスク)
13. [エラーハンドリング](#13-エラーハンドリング)
14. [自動スキル（ConstantSkills）](#14-自動スキルconstantskills)

---

## 1. 基本動作

### 1.1 応答確認

| テスト ID | 指示                   | 期待される動作     | 確認ポイント            |
| --------- | ---------------------- | ------------------ | ----------------------- |
| B-01      | 「こんにちは」         | 挨拶を返す         | チャットに応答が出る    |
| B-02      | 「今どこにいる？」     | 現在位置を報告     | 座標が正確              |
| B-03      | 「体力はどう？」       | 体力・空腹度を報告 | 数値が正確              |
| B-04      | 「今何時？」           | ゲーム内時間を報告 | 朝/昼/夕/夜の判定が正確 |
| B-05      | 「インベントリ見せて」 | 所持品リストを表示 | 全アイテムが表示される  |

---

## 2. 移動・ナビゲーション

### 2.1 基本移動

| テスト ID | 指示                           | 期待される動作         | 確認ポイント       |
| --------- | ------------------------------ | ---------------------- | ------------------ |
| M-01      | 「こっちに来て」               | プレイヤーの位置に移動 | 正確に到達         |
| M-02      | 「座標(100, 64, 100)に行って」 | 指定座標に移動         | 正確に到達         |
| M-03      | 「北に 10 ブロック進んで」     | 相対移動               | 方角と距離が正確   |
| M-04      | 「ジャンプして」               | ジャンプ               | ジャンプする       |
| M-05      | 「しゃがんで」                 | スニーク状態に         | スニーク状態になる |
| M-06      | 「走って」                     | ダッシュ状態に         | ダッシュ状態になる |

### 2.2 障害物対応

| テスト ID | 指示                       | 期待される動作           | 確認ポイント               |
| --------- | -------------------------- | ------------------------ | -------------------------- |
| M-07      | 壁の向こうの座標へ移動指示 | 迂回して到達             | パスファインディングが機能 |
| M-08      | 水を挟んだ場所への移動     | 泳いで到達 or 迂回       | 水中でも対応               |
| M-09      | 高い場所への移動           | 階段状に登る or ジャンプ | 高低差を克服               |
| M-10      | 到達不可能な場所への移動   | エラーを報告             | 適切なエラーメッセージ     |

---

## 3. 採掘・ブロック操作

### 3.1 採掘

| テスト ID | 指示                              | 期待される動作       | 確認ポイント       |
| --------- | --------------------------------- | -------------------- | ------------------ |
| D-01      | 「目の前のブロックを掘って」      | 正面のブロックを採掘 | ブロックが壊れる   |
| D-02      | 「座標(x,y,z)のブロックを掘って」 | 指定座標を採掘       | 正確な座標が壊れる |
| D-03      | 「石を 5 個集めて」               | 石を採掘して収集     | 5 個収集で停止     |
| D-04      | 「周りの木を切って」              | 近くの木を伐採       | 原木を回収         |

### 3.2 ブロック設置

| テスト ID | 指示                             | 期待される動作           | 確認ポイント     |
| --------- | -------------------------------- | ------------------------ | ---------------- |
| P-01      | 「土ブロックを目の前に置いて」   | 正面に土を設置           | 正確な位置に設置 |
| P-02      | 「座標(x,y,z)に石を置いて」      | 指定座標に設置           | 正確な座標に設置 |
| P-03      | 「ここからあそこまで石で埋めて」 | 範囲を埋める（fillArea） | 範囲が正確       |

### 3.3 ブロック操作

| テスト ID | 指示               | 期待される動作         | 確認ポイント |
| --------- | ------------------ | ---------------------- | ------------ |
| A-01      | 「ドアを開けて」   | ドアをアクティベート   | 開閉する     |
| A-02      | 「レバーを引いて」 | レバーをアクティベート | 状態が変わる |
| A-03      | 「ボタンを押して」 | ボタンをアクティベート | 作動する     |

---

## 4. クラフト・製作

### 4.1 レシピ確認

| テスト ID | 指示                                 | 期待される動作   | 確認ポイント       |
| --------- | ------------------------------------ | ---------------- | ------------------ |
| C-01      | 「松明のレシピを教えて」             | レシピを表示     | 正確なレシピ       |
| C-02      | 「ダイヤモンドピッケルのレシピは？」 | レシピを表示     | 全材料が表示される |
| C-03      | 「白いベッドのレシピは？」           | 複数レシピを表示 | 全パターン表示     |

### 4.2 クラフト実行

| テスト ID | 指示                                   | 期待される動作       | 確認ポイント       |
| --------- | -------------------------------------- | -------------------- | ------------------ |
| C-04      | 「松明を 4 本作って」（材料あり）      | 松明をクラフト       | 4 本作成される     |
| C-05      | 「作業台を作って」（材料あり）         | 作業台をクラフト     | 作成される         |
| C-06      | 「作業台を作って」（材料なし）         | エラーを報告         | 足りない材料を報告 |
| C-07      | 「鉄のピッケルを作って」（作業台なし） | 作業台を探す or 作る | 適切に対応         |

---

## 5. インベントリ管理

### 5.1 確認

| テスト ID | 指示                     | 期待される動作   | 確認ポイント       |
| --------- | ------------------------ | ---------------- | ------------------ |
| I-01      | 「丸石いくつ持ってる？」 | 個数を報告       | 正確な数           |
| I-02      | 「食べ物ある？」         | 食料の有無を報告 | 食料アイテムを認識 |
| I-03      | 「装備を見せて」         | 装備品を報告     | 防具・武器を表示   |

### 5.2 操作

| テスト ID | 指示                         | 期待される動作       | 確認ポイント       |
| --------- | ---------------------------- | -------------------- | ------------------ |
| I-04      | 「土を 5 個捨てて」          | 土を 5 個ドロップ    | 正確な数をドロップ |
| I-05      | 「落ちてるアイテムを拾って」 | 近くのアイテムを拾う | アイテムを回収     |
| I-06      | 「剣を持って」               | 剣を装備             | メインハンドに装備 |
| I-07      | 「盾を持って」               | 盾を装備             | オフハンドに装備   |

---

## 6. チェスト・コンテナ

### 6.1 基本操作

| テスト ID | 指示                                 | 期待される動作       | 確認ポイント       |
| --------- | ------------------------------------ | -------------------- | ------------------ |
| CH-01     | 「チェストを開けて」                 | 近くのチェストを開く | チェストが開く     |
| CH-02     | 「チェストに丸石を全部入れて」       | 丸石を預ける         | 正確に移動         |
| CH-03     | 「チェストから鉄インゴットを取って」 | 鉄を取り出す         | インベントリに追加 |
| CH-04     | 「チェストの中身を教えて」           | 内容物をリスト       | 全アイテム表示     |

---

## 7. かまど・精錬

### 7.1 精錬操作

| テスト ID | 指示                         | 期待される動作   | 確認ポイント   |
| --------- | ---------------------------- | ---------------- | -------------- |
| F-01      | 「鉄鉱石を精錬して」         | かまどで精錬開始 | 精錬が始まる   |
| F-02      | 「かまどの状態を見て」       | 精錬状況を報告   | 進捗を表示     |
| F-03      | 「精錬したものを取り出して」 | 完成品を回収     | アイテムを取得 |

---

## 8. 農業

### 8.1 作物操作

| テスト ID | 指示                           | 期待される動作     | 確認ポイント   |
| --------- | ------------------------------ | ------------------ | -------------- |
| FA-01     | 「小麦を収穫して」             | 成熟した小麦を収穫 | 小麦を取得     |
| FA-02     | 「ニンジンを植えて」           | ニンジンを植える   | 作物が植わる   |
| FA-03     | 「骨粉を使って」               | 骨粉で成長促進     | 作物が成長     |
| FA-04     | 「牛に小麦をあげて繁殖させて」 | 動物を繁殖         | 子供が生まれる |

---

## 9. 戦闘

### 9.1 攻撃

| テスト ID | 指示                 | 期待される動作  | 確認ポイント     |
| --------- | -------------------- | --------------- | ---------------- |
| AT-01     | 「ゾンビを攻撃して」 | ゾンビに攻撃    | ダメージを与える |
| AT-02     | 「近くの敵を倒して」 | 敵対 Mob を攻撃 | 敵を撃破         |
| AT-03     | 「豚を攻撃して」     | 豚に攻撃        | ダメージを与える |
| AT-04     | 「攻撃をやめて」     | 攻撃中止        | 攻撃が止まる     |

### 9.2 防御

| テスト ID | 指示             | 期待される動作          | 確認ポイント     |
| --------- | ---------------- | ----------------------- | ---------------- |
| AT-05     | 「敵から逃げて」 | 敵対 Mob から距離を取る | 安全な場所へ移動 |

---

## 10. 探索・調査

### 10.1 ブロック探索

| テスト ID | 指示                         | 期待される動作         | 確認ポイント |
| --------- | ---------------------------- | ---------------------- | ------------ |
| E-01      | 「ダイヤモンド鉱石を探して」 | 近くのダイヤ鉱石を検索 | 座標を報告   |
| E-02      | 「水を探して」               | 近くの水源を検索       | 座標を報告   |
| E-03      | 「作業台はどこ？」           | 近くの作業台を検索     | 座標を報告   |

### 10.2 エンティティ探索

| テスト ID | 指示                 | 期待される動作              | 確認ポイント |
| --------- | -------------------- | --------------------------- | ------------ |
| E-04      | 「近くに誰かいる？」 | 近くのプレイヤー/Mob を報告 | リストを表示 |
| E-05      | 「村人はどこ？」     | 近くの村人を検索            | 座標を報告   |
| E-06      | 「牛を探して」       | 近くの牛を検索              | 座標を報告   |

### 10.3 地形調査（新機能）

| テスト ID | 指示                         | 期待される動作                 | 確認ポイント         |
| --------- | ---------------------------- | ------------------------------ | -------------------- |
| E-07      | 「周囲の地形を調べて」       | investigate-terrain を実行     | 地形情報を報告       |
| E-08      | 「家を建てる場所を探して」   | 平坦な場所を調査               | 建築可能な座標を報告 |
| E-09      | 「北を見て何があるか教えて」 | 北向きでスクリーンショット分析 | 視覚情報を報告       |
| E-10      | 「周りを見回して報告して」   | 複数方向をスキャン             | 360 度の情報を報告   |

---

## 11. 村人取引

### 11.1 取引

| テスト ID | 指示                       | 期待される動作 | 確認ポイント   |
| --------- | -------------------------- | -------------- | -------------- |
| V-01      | 「村人と取引して」         | 取引 UI を開く | 取引が可能に   |
| V-02      | 「エメラルドで本を買って」 | 指定取引を実行 | アイテムを入手 |

---

## 12. 複合タスク

### 12.1 マルチステップタスク

| テスト ID | 指示                           | 期待される動作  | 確認ポイント     |
| --------- | ------------------------------ | --------------- | ---------------- |
| MT-01     | 「木を切って作業台を作って」   | 伐採 → クラフト | 両方完了         |
| MT-02     | 「鉄鉱石を掘って精錬して」     | 採掘 → 精錬     | 鉄インゴット取得 |
| MT-03     | 「小麦を収穫してパンを作って」 | 収穫 → クラフト | パン作成         |
| MT-04     | 「ダイヤを見つけて採掘して」   | 探索 → 採掘     | ダイヤ取得       |

### 12.2 建築タスク

| テスト ID | 指示                   | 期待される動作         | 確認ポイント |
| --------- | ---------------------- | ---------------------- | ------------ |
| MT-05     | 「3x3 の土台を作って」 | 9 ブロックの土台を設置 | 正確なサイズ |
| MT-06     | 「壁を作って」         | 指定範囲に壁を設置     | 正確な配置   |
| MT-07     | 「簡単な家を建てて」   | 建築タスク（複雑）     | 構造物完成   |

### 12.3 長時間タスク

| テスト ID | 指示                 | 期待される動作 | 確認ポイント     |
| --------- | -------------------- | -------------- | ---------------- |
| MT-08     | 「石を 64 個集めて」 | 継続的に採掘   | 64 個で停止      |
| MT-09     | 「夜まで待って寝て」 | 待機 → 睡眠    | 正しいタイミング |

---

## 13. エラーハンドリング

### 13.1 エラー状況

| テスト ID | 指示                           | 期待される動作 | 確認ポイント       |
| --------- | ------------------------------ | -------------- | ------------------ |
| ER-01     | 「存在しないアイテムを作って」 | エラーを報告   | 分かりやすいエラー |
| ER-02     | 「到達不可能な場所へ行って」   | エラーを報告   | 理由を説明         |
| ER-03     | 「持ってないアイテムを使って」 | エラーを報告   | 足りないものを報告 |
| ER-04     | 途中で「やめて」               | タスクを中断   | 正常に停止         |
| ER-05     | 矛盾した指示を与える           | 適切に対応     | 確認 or エラー     |

### 13.2 リカバリー

| テスト ID | 指示                 | 期待される動作     | 確認ポイント             |
| --------- | -------------------- | ------------------ | ------------------------ |
| ER-06     | タスク失敗後に再指示 | 新しいタスクを開始 | 前のエラーを引きずらない |

---

## 14. 自動スキル（ConstantSkills）

### 14.1 生存系

| テスト ID | 条件         | 期待される動作           | 確認ポイント |
| --------- | ------------ | ------------------------ | ------------ |
| CS-01     | 空腹度が低下 | 自動で食事               | 回復する     |
| CS-02     | 夜になる     | 自動でベッドを探して寝る | 睡眠する     |
| CS-03     | 水中にいる   | 自動で水面に向かう       | 溺れない     |

### 14.2 戦闘系

| テスト ID | 条件               | 期待される動作 | 確認ポイント |
| --------- | ------------------ | -------------- | ------------ |
| CS-04     | 敵対 Mob が接近    | 自動で逃走     | 距離を取る   |
| CS-05     | 投射物が飛んでくる | 自動で回避     | 当たらない   |

### 14.3 アイテム系

| テスト ID | 条件                     | 期待される動作 | 確認ポイント       |
| --------- | ------------------------ | -------------- | ------------------ |
| CS-06     | 近くにアイテムがドロップ | 自動で拾う     | インベントリに追加 |

---

## 🏆 最重要テスト（これだけやれば基本 OK）

時間がない場合は、以下の 10 テストを優先：

| #   | テスト ID | 内容             | 理由           |
| --- | --------- | ---------------- | -------------- |
| 1   | B-01      | 応答確認         | 基本動作       |
| 2   | M-01      | 移動             | コア機能       |
| 3   | D-03      | 採掘             | 資源収集の基本 |
| 4   | C-04      | クラフト         | 製作の基本     |
| 5   | I-01      | インベントリ確認 | 状態把握       |
| 6   | CH-02     | チェスト操作     | ストレージ管理 |
| 7   | E-01      | ブロック探索     | 探索機能       |
| 8   | AT-01     | 攻撃             | 戦闘機能       |
| 9   | MT-01     | 複合タスク       | 連携動作       |
| 10  | ER-04     | タスク中断       | 制御可能性     |

---

## 📝 テスト実行時のメモ用テンプレート

```
日付: ____/__/__
バージョン: ____
テスター: ____

| テストID | 結果 | メモ |
|---------|------|------|
| B-01 | ✅/❌ | |
| M-01 | ✅/❌ | |
| ... | | |
```

---

## 🐛 既知の問題・注意点

1. **パスファインディング**: 複雑な地形では迂回に時間がかかることがある
2. **クラフト**: 作業台が遠い場合は移動が必要
3. **精錬**: 燃料がないとエラー
4. **スクリーンショット**: Minecraft クライアントと ShannonUIMod が必要
5. **建築**: 複雑な建築は現状サポートが限定的

---

## 🔄 回帰テスト用チェックリスト

コード変更後に最低限確認すべき項目：

- [ ] 応答する
- [ ] 移動できる
- [ ] ブロックを掘れる
- [ ] ブロックを置ける
- [ ] クラフトできる
- [ ] チェストを操作できる
- [ ] 探索できる
- [ ] タスクを中断できる
